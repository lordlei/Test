package DAO.daoImpl;import java.sql.SQLException;import java.util.List;import Bean.User;import DAO.UserDao;import Utils.C3P0Utils;import org.apache.commons.dbutils.QueryRunner;import org.apache.commons.dbutils.handlers.BeanHandler;import org.apache.commons.dbutils.handlers.BeanListHandler;public class UserDaoImp implements UserDao {	private QueryRunner qr;	// ??¦É???	public UserDaoImp() {		qr = new QueryRunner(C3P0Utils.getDataSource());	}	@Override	public List<User> findAllUser() {		try {			// 1.??§ÕSQL???			String sql = "select * from user";			// 2.???SQL???			List<User> list = qr.query(sql, new BeanListHandler<User>(					User.class));			// 3.????????			return list;		} catch (SQLException e) {			throw new RuntimeException(e);		}	}	@Override	public boolean addUser(User user) {		try {			// 1.??§ÕSQL???			String sql = "insert into user values (NULL,?,?,?,?,?,?,?)";			// 2.???¨°???			Object[] param = { "0", "0",					user.getUnickname(), user.getUsex(), user.getUage(),					user.getUphonenumber(), user.getUemail() };			// 3.???SQL???			int rows = qr.update(sql, param);			//4.????????,????????			if(rows>0) {				return true;			}else {				return false;			}		} catch (SQLException e) {			throw new RuntimeException(e);		}	 	}	@Override	public int deleteUser(int uid) {		try {			// 1.??§ÕSQL???			String sql = "delete from user where uid=?";			// 2.???¨°???			Object[] param = { uid };			// 3.???SQL???			int rows = qr.update(sql,param);			// 4.??????			return rows;		} catch (SQLException e) {			throw new RuntimeException(e);		}	}	@Override	public User findUserById(int uid) {		try {			// 1.??§ÕSQL???			String sql = "select * from user where uid=?";			// 2.???¨°???			Object[] param = { uid };			// 3.???SQL???			User user = qr.query(sql, new BeanHandler<User>(User.class), param);			// 4.??????			return user;		} catch (SQLException e) {			throw new RuntimeException();		}	}	@Override	public boolean updateUser(User user) {		try {			// 1.??§ÕSQL???			String sql = "update user set uusername='0',upassword='0',unickname=?,usex=?,uage=?,uphonenumber=?,uemail=? where uid=? ";			// 2.???¨°???			Object[] param = {					user.getUnickname(), user.getUsex(), user.getUage(),					user.getUphonenumber(), user.getUemail(), user.getUid() };			// 3.???SQL???			int rows = qr.update(sql,param);			// 4.????????			if (rows > 0) {				return true;			} else {				return false;			}		} catch (SQLException e) {			throw new RuntimeException(e);		}	}	@Override	public List<User> findUserByName(String username) {		try {			// 1.??§ÕSQL???			String sql = "select * from user where unickname like '%"+ username +"%'";			// 2.???¨°???			// 3.???SQL???			List<User> list = qr.query(sql, new BeanListHandler<User>(					User.class));			// 4.??????			return list;		} catch (SQLException e) {			throw new RuntimeException(e);		}	}}